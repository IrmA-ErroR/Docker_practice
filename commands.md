# Основные команды Docker

[Официальная документация](https://docs.docker.com/reference/cli/docker/container/)

```docker ps``` - Отображает список активных контейнеров в системе

```docker run``` - Создает и запускает контейнер из образа

```docker start <имя контейнера>``` - Запускает остановленный контейнер  
```docker stop <имя контейнера>``` - Останавливает работающий контейнер
```docker restart <имя контейнера>``` - Перезапускает контейнер

```docker rm <>``` - Удаляет один или несколько контейнеров, которые уже остановлены
```docker rm -f <>``` - Принудительное удаление (позволяет удалить контейнер, который выполняется в данный момент)

```docker images``` - Возвращает список всех образов

```docker rmi <>``` - Удаление образа.образов
Важно, чтобы перед м образа были остановлены и удалены все связанные контейнеры.

```docker pull``` - Скачивает образ

```docker exec <команда>``` - Выполнение команды внутри работающег контейнера

## [docker run](https://docs.docker.com/reference/cli/docker/container/run/) 
```docker
docker run -it –rm ubuntu /bin/bash
-t — флаг, добавляющий псевдотерминал внутри нового контейнера.
-i — флаг, который позволяет установить интерактивное соединение, взяв стандартный ввод (STDIN) контейнера.
-rm — флаг, автоматически удаляющий контейнер после завершения процесса. По умолчанию контейнеры не удаляются. Этот контейнер существует, пока установлена текущая сессия оболочки, и уничтожается, когда мы покидаем сессию (например, SSH-сессию с удаленным сервером).

-d — флаг запускает контейнер в фоновом режиме (демонизирует его).
--name — флаг, присваивающий конкретное имя контейнеру

```
```
-p <порт хоста>:<текущий порт контейнера> — флаг, публикующий порты контейнера на порты хост-машины. Это позволяет приложениям внутри контейнера общаться с внешним миром и получать доступ к ресурсам на хост-машине.
```

```
-v <папка хоста>:<папка внутри контейнера>[:режим] — флаг позволяет монтировать тома или каталоги на хост-машине в контейнер. Это позволяет обмениваться данными между хост-машиной и контейнером и сохранять данные контейнера даже после его остановки
```

```
-e, --env   — флаг, для передачи переменных окружения (Set environment variables)
```

#### Пример 1
Следующая команда опубликует порт 80 хост-машины на порт 8001 контейнера:

```
docker run -p 80:8001 my-image
```

Теперь приложения в контейнере могут взаимодействовать с хост-машиной через порт 80 хост-машины.



#### Пример 2
Запустить контейнер redis и быть уверенным, что для него не будет настроено логов:
```
docker run -it -d --log-driver none redis
```

#### Пример 3
Разверни экземпляр базы mysql с помощью образа mysql и назови контейнер mysql-db.


Для базы этого контейнера установи пароль db_pass123. Ты можешь посмотреть правильный образ mysql на Docker Hub и там же узнать, как правильно проинициализировать root-пароль для ее контейнеризированной версии.

Узнай, сколько баз данных создано в контейнере с mysql.

```
docker run -it --name mysql-db -e MYSQL_ROOT_PASSWORD=db_pass123 mysql

docker exec -it mysql-db /bin/bash
mysql -u root -h localhost -p # ввод пароля
SELECT COUNT(*) FROM information_schema.SCHEMATA;
```

```
docker exec mysql-db  mysql -uroot -pdb_newpass123 -e "SELECT COUNT(*) FROM information_schema.SCHEMATA;"
```

## Команды проверки состояния контейнера: 

```
docker ps - дает общую информацию о контейнерах
```

```
docker inspect <ID/name> - показывает подробную информацию о конкретном контейнере
```

```
docker log <ID/name> - возвращает логи конкретного контейнера 
```

## Проверить статус службы docker на хосте:
```
sudo systemctl status docker
```
